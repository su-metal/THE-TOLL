// Supabase CDN Loader
// SupabaseライブラリをCDNから動的に読み込む

(function() {
  'use strict';
  
  // CDNから直接Supabaseを読み込む
  // Note: Chrome拡張のコンテンツスクリプトではESモジュールが使えないため、
  // UMDビルドをグローバルに読み込む必要がある
  
  // Supabase v2 UMD build
  const script = document.createElement('script');
  script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js';
  script.onload = function() {
    console.log('[THE TOLL] Supabase loaded successfully');
    window.dispatchEvent(new CustomEvent('supabase-loaded'));
  };
  script.onerror = function() {
    console.error('[THE TOLL] Failed to load Supabase');
  };
  
  // ドキュメントに追加
  (document.head || document.documentElement).appendChild(script);
})();
